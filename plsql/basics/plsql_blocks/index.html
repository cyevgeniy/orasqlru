<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/design.css><link rel=stylesheet href=/css/layout.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/navigation.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144211477-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-144211477-1")</script><title>Учебник Oracle SQL, PL/SQL | Вложенные и именованные блоки</title></head><body><div class=menu><a href=/ class=menu__item>Orasql.ru</a>
<a href=/#sql class=menu__item>Учебник Oracle SQL</a>
<a href=/#plsql class=menu__item>Учебник PL/SQL</a></div><div class=content><h1>Вложенные и именованные блоки</h1><p>В <a href=/plsql/basics/plsql_anonymous_blocks/>прошлый раз</a> был рассмотрен
самый простой вариант блоков в PL/SQL - анонимные блоки.</p><p>В этой части мы рассмотрим возможность вкладывать блоки внутрь других
блоков, а также давать блокам имена.</p><h2 id=вложенные-блоки>Вложенные блоки</h2><pre><code>declare
    l_a number := 10;
begin
    -- Начало вложенного блока
    declare
        l_b number;
    begin
        l_b := 20;
        dbms_output.put_line(l_a);
        dbms_output.put_line(l_b);
    end;
end;
/
</code></pre><p>Вложенные блоки могут обращаться ко всем объектам, которые были
объявлены во внешних блоках. Именно поэтому в примере выше мы свободно
можем обращаться из к переменной <code>l_a</code>, которая была объявлена во
внешнем блоке.</p><p>Обратное неверно - мы не можем обращаться из внешнего блока к объектам,
которые были объявлены во внутреннем блоке:</p><pre><code>declare
    l_a number := 10;
begin
    declare
        l_b number;
    begin
        l_b := 20;
        dbms_output.put_line(l_b);
        dbms_output.put_line(l_a);
    end;

    -- Мы не можем обращаться к переменной l_b
    if l_b = 10 then
        dbms_output.put_line('l_b равно 10')
    else
        dbms_output.put_line('l_b не равно 10');
    end if;
end;
/
</code></pre><h2 id=метки-блоков>Метки блоков</h2><p>Мы можем именовать блоки метками, чтобы можно было отличить несколько
объектов с одним и тем же именем во внешних блоках:</p><pre><code>&lt;&amp;ltmain&gt;&gt;
declare
    l_a number := 10;
begin
    &lt;&amp;ltchild&gt;&gt;
    declare
        l_a number := 20;
    begin
        dbms_output.put_line(main.l_a);
        dbms_output.put_line(child.l_a);
    end;
end;
/
</code></pre><p>В примере выше во внешнем и внутреннем блоках объявлены переменные
<code>l_a</code>, и используя метки блоков <code>&lt;&lt;main>></code> и <code>&lt;&lt;child>></code>, мы можем
указывать, какую же именно переменную использовать - из внешнего, либо
из внутреннего блока.</p><p>По возможности, подобных случаев следует избегать, так как они усложняют
чтение программы.</p></div><footer class="footer b-dark-low b-top"><div class="footer-container container centered edges"><p class="text-medium text-moderated">© Orasql.ru<br>2019-2023</p></div></div></footer></body></html>
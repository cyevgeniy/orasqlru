<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/superkube.min.css><link rel=stylesheet href=/css/main.css><script>var clicky_site_ids=clicky_site_ids||[];clicky_site_ids.push(101305633)</script><script async src=//static.getclicky.com/js></script><title>Учебник Oracle SQL, PL/SQL | Когда использовать PL/SQL</title></head><body><div class="navbar bg-dark mb-10"><div class="navbar-container container edges centered"><div class=navbar-brand><a href=/ class=brand>Orasql.ru</a></div><div class="navbar-nav ml-6"><nav class="nav nav-light nav-semibold"><ul class=nav-list><li class=nav-item><a href=/book/ class=nav-link>Книга</a></li></ul></nav><nav class="nav nav-light nav-semibold"><ul class=nav-list><li class=nav-item><a href=https://github.com/cyevgeniy/orasqlru class=nav-link>Github</a></li></ul></nav></div></div></div><div id=container class="container-medium edges centered"><div class="doc-head mb-4 container-10"><h5 class="heading-micro heading-muted">Введение</h5><h1 class="heading-huge heading-heavy">Когда использовать PL/SQL</h1></div><div class="doc-toc mt-6 mb-6"><nav class="menu menu-underline menu-medium menu-numbered"><ul class=menu-list><li class=menu-item><a href=#%d0%b8%d0%bd%d0%ba%d0%b0%d0%bf%d1%81%d1%83%d0%bb%d1%8f%d1%86%d0%b8%d1%8f class=menu-link>Инкапсуляция</a></li><li class=menu-item><a href=#%d0%bd%d0%b5%d0%b4%d0%be%d1%81%d1%82%d0%b0%d1%82%d0%be%d1%87%d0%bd%d0%be-%d0%b2%d0%be%d0%b7%d0%bc%d0%be%d0%b6%d0%bd%d0%be%d1%81%d1%82%d0%b5%d0%b9-sql class=menu-link>Недостаточно возможностей SQL</a></li><li class=menu-item><a href=#%d1%81%d0%be%d0%bf%d1%80%d0%be%d0%b2%d0%be%d0%b6%d0%b4%d0%b0%d0%b5%d0%bc%d0%be%d1%81%d1%82%d1%8c class=menu-link>Сопровождаемость</a></li></ul></nav></div><p>PL/SQL нужно использовать, когда:</p><ul><li>Нужно скрыть функционал за общим интерфейсом(инкапсуляция)</li><li>Возможностей SQL недостаточно</li><li>Реализация на PL/SQL будет более сопровождаемой</li></ul><p>Коротко по каждому из пунктов.</p><h2 id=инкапсуляция>Инкапсуляция</h2><p>Мы можем создать функцию, либо хранимую процедуру, после чего различные
клиенты смогут воспользоваться ими, не зная деталей реализации
функционала.</p><h2 id=недостаточно-возможностей-sql>Недостаточно возможностей SQL</h2><p>Здесь лучше подойтет пример. Предположим, нам нужно реализовать логику:</p><ol><li>Если значение некоего параметра, назовем его `quantity`, больше
100, то:</li><li>Удалить некоторые строки из таблицы A.</li><li>Иначе:</li><li>Изменить некоторые строки в таблице B</li></ol><p>Пункты 2 и 3 легко реализуются на чистом SQL. Связки 1-2 и 3-4 также
можно реализовать на SQL, но условное выполнение 2 либо 4 возможно
только при добавлении возможностей ветвления PL/SQL.</p><h2 id=сопровождаемость>Сопровождаемость</h2><p>В один монстрообразный SQL-запрос можно засунуть много сложной логики, и
в целом так и нужно поступать, но лишь до тех пор, пока ты уверен, что
он:</p><ul><li>Понятен</li><li>Будет понятен через полгода</li><li>Тестируем</li></ul><p>Если есть сомнения, лучше разделить функционал на более простые
части(используя хранимые процедуры, например) и реализовать каждую из
них отдельно.</p><nav class="pagination mb-3"><ul class=pagination-list><li class=pagination-item><a href=http://orasql.ru/plsql/intro/plsql_intro/ class="pagination-link pagination-prev">&lt; Что такое PL/SQL</a></li></ul></nav></div><footer class="footer b-dark-low b-top"><div class="footer-container container centered edges"><div class="footer-body mt-10"><nav class="nav nav-muted nav-menu-sm"><ul class=nav-list><li class=nav-item><a href=/ class=nav-link>Orasql.ru</a></li><li class=nav-item><a href=/ class=nav-link>Учебник</a></li><li class=nav-item><p class="text-medium text-moderated">Email: orasqlru@gmail.com</p></li></ul></nav></div><div class="footer-copy mt-6 pt-6 b-dark-7 b-top"><p class="text-medium text-moderated">© Orasql.ru<br>2019-2021</p></div></div></footer></body></html>
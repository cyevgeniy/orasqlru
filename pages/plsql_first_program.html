<!--{
    "Title": "Первая программа на PL/SQL",
    "Links": {
        "Next": {
            "Url": "../plsql_dbms_put_line/index.html",
            "Title": "DBMS_OUTPUT.PUT_LINE. Вывод на экран"
        },
        "Prev": {
            "Url": "../plsql_blocks/index.html",
            "Title": "Вложенные и именованные блоки"
        }
        }
}-->

<div class="doc-head mb-4 container-10">
    <h5 class="heading-micro heading-muted">Основы PL/SQL</h5>
    <h1 class="heading-huge heading-heavy">Первая программа на PL/SQL </h1>
</div>



<p>
Итак, напишем нашу первую программу на PL/SQL. Но перед этим создадим
простую таблицу <code>users</code>, в которой будем хранить список пользователей
некой системы:
</p>


<pre><code>create table users(
    id number primary key,
    login varchar2(60) not null,
    sign_date date default sysdate not null,
    is_active number(1) default 1 not null
);

insert into users
values(1, 'UserA', to_date('21.01.2019', 'dd.mm.yyyy'), 1);

insert into users
values(2, 'UserB', to_date('15.07.2017', 'dd.mm.yyyy'), 1);

insert into users
values(3, 'UserC', to_date('02.10.2015', 'dd.mm.yyyy'), 1);</code></pre>

<p>
Теперь приведем текст программы:
</p>


<pre>
<code>begin
    update users
    set is_active = 0
    where sign_date < to_date('01.01.2016', 'dd.mm.yyyy'); 
end;
/</code>
</pre>

<p>
Данный код делает неактивными всех пользователей, которые
были зарегистрированы ранее, чем первое января 2016 года.
</p>

<p>
Программа очень простая, но зато она наглядно демонстрирует
важнейшую особенность PL/SQL - <strong>тесную интеграцию
с SQL</strong>. Любой SQL запрос может быть вызван из PL/SQL,
и это абсллютно нормально и естественно. На самом деле, большую
часть кода PL/SQL, как правило, составляют именно SQL-запросы.
</p>

<p>
Здесь важно понимать, почему это PL/SQL программа, а не простой
SQL-запрос. Причиной является тот факт, что запрос заключен
в <a href="../plsql_anonymous_blocks/index.html">анонимный блок</a>.
</p>

<p>
Внутри блока может находиться сколько угодно запросов. Например, 
следующая программа делает неактивными пользователей, зарегистрировавшихся
раньше 2016 года, и добавляет нового пользователя:
</p>

<pre>
<code>begin
    update users
    set is_active = 0
    where sign_date < to_date('01.01.2016', 'dd.mm.yyyy');

    insert into users
    values(4, 'UserD', SYSDATE);
end;
/</code>
</pre>
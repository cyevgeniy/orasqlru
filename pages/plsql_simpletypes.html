<!--{
    "Title": "Переменные, константы. Простые типы данных",
    "Links": {
        "Next": {
            "Url": "../plsql_ifelse/index.html",
            "Title": "Условное ветвление. If...else"
        },
        "Prev": {
            "Url": "../plsql_dbms_put_line/index.html",
            "Title": "DBMS_OUTPUT.PUT_LINE. Вывод на экран"
        }
        }
}-->

<div class="doc-head mb-4 container-10">
    <h5 class="heading-micro heading-muted">Основы PL/SQL</h5>
    <h1 class="heading-huge heading-heavy">Переменные, константы. Простые типы данных </h1>
</div>

<div class="doc-toc mt-6 mb-6">
    <nav class="menu menu-underline menu-medium menu-numbered">
        <ul class="menu-list">
        <li class="menu-item"><a href="#numbers" class="menu-link">Числа</a></li>
        <li class="menu-item"><a href="#dates" class="menu-link">Даты</a></li>
        <li class="menu-item"><a href="#strings" class="menu-link">Строки</a></li>
        <li class="menu-item"><a href="#boolean" class="menu-link"> Логический тип </a></li>
        <li class="menu-item"><a href="#vars" class="menu-link">Переменные</a></li>
        <li class="menu-item"><a href="#consts" class="menu-link">Константы</a></li>
        </ul>
    </nav>
</div>

<p>
Рассмотрим типы, которые позволяют хранить три сущности - числа, строки и даты.
</p>

<h2 id="numbers">Числа</h2>

<p>
Тип для хранения чисел в PL/SQL используется тот же тип данных, что и
при создании таблиц. Почитать про него можно <a href="../maintypes/index.html">здесь</a>.
</p>

<div class="alert alert-info">
<p>
Существуют и другие типы для работы с числами, например <code>PLS_INTEGER</code>,
<code>SIMPLE_INTEGER</code> и др. Они будут рассмотрены позже.
</p>
</div>

<h2 id="dates">Даты</h2>

Для дат используются те же типы, что и в SQL - <code>Date</code>
и <code>Timestamp</code>.

<h2 id="strings">Строки</h2>

<p>
Для хранения строк используются типы
<code>Varchar2</code> и <code>CLOB</code>.
Последний расшифровывается как <i>Char Large Object</i>,
и предназначен для хранения очень больших объемов текстовой информации.
</p>

<div class="alert alert-info">
<p>
Стоит отметить разницу типов <code>Varchar2</code> в SQL и PL/SQL:
в первом случае максимальная длина ограничена 32767 байтами, во втором - 4000 байтами.
</p>
</div>

<h2 id="boolean"> Логический тип </h2>

<p>
Логический тип данных используется для хранения значений True(истина)
или False(ложь). В PL/SQL такой тип данных называется <code>BOOLEAN</code>.
Он еще будет рассмотрен подробнеее далее в учебнике.
</p>

<h2 id="vars">Переменные</h2>

<p>
Переменные в PL/SQL должны объявляться в секции объявления переменных.
Так как мы пока рассмотрели только
 <a href="../plsql_anonymous_blocks/index.html">анонимные блоки</a>, работать будем
с ними.
</p>

<p>
Напишем анонимный блок, в котором задействуем переменные:
</p>

<pre>
<code>declare
    age number;
    name varchar2(100 char);
begin
    age := 45;
    name := 'Alex';

    dbms_output.put_line(age);
    dbms_output.put_line(name);
end;
/</code>
</pre>

<p>
Вывод на экран:
</p>

<pre>
45
Alex
</pre>

<p>
Выше мы объявили две переменные, <code>age</code> и <code>name</code>,
которым позднее присвоили значения.
</p>

<p>
Присваивание значений переменным допускается сразу после их определения:
</p>

<pre>
declare
    age number := 45;
    name varchar2(100 char) := 'Alex';
begin
    null;
end;
/
</pre>

<div class="alert alert-error">
<p>
Следует обратить внимание на то, что при объявлении строкового
типа нужно указываеть размер, как в примере выше.
</p>
</div>

<p>
Команда null ничего полезного не делает, в PL/SQL она используется для того,
чтобы подставлять ее в те места, где компилятор требует наличия команды. Так
и в нашем примере - исполняемый блок должен что-то иметь внутри себя.
</p>

После объявления переменных с ними можно производить различные операции - 
арифметические, логические, булевы и так далее. Не будем все рассматривать
детально, так как сложностей здесь возникать не должно.

<pre>
declare
    age number := 10;
    name varchar2(100 char) := 'Alex';
begin
    age := age + 20;
    name := 'Hello, ' || name;

    dbms_output.put_line(age);
    dbms_output.put_line(name);
end;
/
</pre>

Вывод:

<pre>
30
Hello, Alex
</pre>

<h2 id="consts">Константы</h2>

<p>Константа - это переменная, значение которой нельзя изменять.</p>

Пример объявления константы:

<pre>
<code>declare
    MIN_AGE constant number := 21;
begin
    dbms_output.put_line('Минимальный возраст для входа: ' || MIN_AGE);
end;
/</code>
</pre>

<p>
Вывод:
</p>

<pre>
Минимальный возраст для входа: 21
</pre>

<div class="alert alert-info">
<p>
Константе должно присваиваться значение сразу после ее объявления.
</p>
</div>


Значение констант нельзя изменять, но во всем остальном они работают
точно также, как и переменные:

<pre>
<code>declare
    DEFAULT_NAME VARCHAR2(10) := 'Anonymous';
    MIN_AGE constant number := 21;
    user_name varchar2(50);
    user_age number;
begin
    -- Присваиваем значение константы переменной
    user_name := DEFAULT_NAME;
    user_age := MIN_AGE;

    dbms_output.put_line(user_name);
    dbms_output.put_line(user_age);

    -- Увеличиваем значение переменной на значение константы
    user_age := user_age + MIN_AGE;
    
    dbms_output.put_line(user_age);

end;
/</code>
</pre>


<p>
Вывод:
</p>

<pre>
Anonymous
21
42
</pre>